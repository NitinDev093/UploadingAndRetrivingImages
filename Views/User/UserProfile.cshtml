
@{
    ViewBag.Title = "UserProfile";
}


<form>
    <input type="hidden" name="Id" id="hiddenid" value="0" />

    <label for="Name">Name:</label><br />
    <input type="text" id="Name"  /><br /><br />

    <label for="Email">Email:</label><br />
    <input type="email" id="Email"  /><br /><br />

    <label for="Password">Password:</label><br />
    <input type="password" id="Password"  /><br /><br />

    <label for="Address">Address:</label><br />
    <textarea id="Address" ></textarea><br /><br />

    <label for="City">City:</label><br />
    <input type="text" id="City"  /><br /><br />

    <label for="Region">Region:</label><br />
    <input type="text" id="Region"  /><br /><br />

    <label for="PostalCode">Postal Code:</label><br />
    <input type="text" id="PostalCode"  /><br /><br />
    <button type="button" onclick="insertuser()">Submit</button>

</form>

<table id="listonLoad" border="1">
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Password</th>
            <th>Address</th>
            <th>City</th>
            <th>Region</th>
            <th>Postal Code</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
    <tbody/>
</table>


<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">

    $(document).ready(function () {
        readuserData();
    });

    function insertuser() {
        var name = $("#Name").val();
        var email = $("#Email").val();
        var password = $("#Password").val();
        var address = $("#Address").val();
        var city = $("#City").val();
        var region = $("#Region").val();
        var postal = $("#PostalCode").val();

        $.ajax({

            type: "POST",
            url: '/User/insertUser',
            data: JSON.stringify({
                Name: name,
                Email: email,
                Password: password,
                Address: address,
                City: city,
                Region: region,
                PostalCode: postal
            }),
            contentType: "application/json; charset=utf-8",
            success: function (response) {
                if (response.success) {
                    alert(response.message);
                } else {
                    alert(response.message);
                }
            },
            error: function () {
                alert("Error");
            }

        });

    }

    function readuserData() {
        $.ajax({
            type: "GET",
            url: '/User/ReadUser',
            contentType: "application/json; charset=utf-8",
            success: function (response) {
                if (response.success) {
                    $("#listonLoad  tbody").empty();
                    $.each(response.data, function (index, item) {
                        var row = "<tr>" +

                            "<td>" + item.Name + "</td>" +
                            "<td>" + item.Email + "</td>" +
                            "<td>" + item.Password + "</td>" +
                            "<td>" + item.Address + "</td>" +
                            "<td>" + item.City + "</td>" +
                            "<td>" + item.Region + "</td>" +
                            "<td>" + item.PostalCode + "</td>" +
                            "<td>" +
                            "<button type='button'>  Edit  </button>" +
                            "<button type='button'>  Delete  </button>" +
                            "</td>" +

                            "</tr> ";
                        $("#listonLoad  tbody").append(row);
                    });
                } else {
                    alert(response.message);
                }
            },
            error: function () {
                alert("Server error");
            }

        });
    }

</script>







